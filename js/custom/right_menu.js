const str_1='<div style="background: #121212;height:100vh;text-align: center;"><img src="https://i.loli.net/2020/05/19/aKOcLiyPl2JQdFD.png" style="margin:12em auto 0; height: 16em;"><div style="color: rgba(255, 255, 255, .7);width: 100%;font-size: 1.7em;text-align: center;font-weight: bold;padding: 30px auto;margin-top: 15px;">这个网站炸了，<a href="/" style="color:#99a9bf;background-color: #1f1f1f;padding: .4em .5em;text-decoration: none;border-radius:4px">点击返回试试吧~</a></div></div>';document.onkeydown=function(e){return 123==e.keyCode||e.ctrlKey&&e.shiftKey&&(74===e.keyCode||73===e.keyCode||67===e.keyCode)||e.ctrlKey&&85===e.keyCode?(btf.snackbarShow("你真坏，不能打开控制台喔!"),event.keyCode=0,event.returnValue=!1,!1):(e.ctrlKey||e.metaKey)&&67==e.keyCode&&""!=selectTextNow?(btf.snackbarShow("复制成功"),rightmenuCopyText(selectTextNow),!1):void 0},function(){var e=document.createElement("div");Object.defineProperty(e,"id",{get:function(){try{return document.body.innerHTML=str_1}catch(e){}return document.body.innerHTML=str_1}}),console.log(e)}();let rm={showRightMenu:function(e,n=0,t=0){let o=$("#rightMenu");o.css("top",n+"px").css("left",t+"px"),e?(stopMaskScroll(),o.show()):o.hide()}},rmWidth=$("#rightMenu").width(),rmHeight=$("#rightMenu").height();rm.reloadrmSize=function(){rmWidth=$("#rightMenu").width(),rmHeight=$("#rightMenu").height()};let domhref="",domImgSrc="",selectTextNow="";function selceText(){let e;e=document.selection?document.selection.createRange().text:window.getSelection()+"",selectTextNow=e||""}function removeRightMenu(){rm.showRightMenu(!1),$("#rightmenu-mask").attr("style","display: none")}function stopMaskScroll(){if(document.getElementById("rightmenu-mask")){document.getElementById("rightmenu-mask").addEventListener("mousewheel",(function(e){removeRightMenu()}),!1)}if(document.getElementById("rightMenu")){document.getElementById("rightMenu").addEventListener("mousewheel",(function(e){removeRightMenu()}),!1)}}function switchDarkMode(){removeRightMenu();"light"===("dark"===document.documentElement.getAttribute("data-theme")?"dark":"light")?(activateDarkMode(),saveToLocal.set("theme","dark",2),void 0!==GLOBAL_CONFIG.Snackbar&&btf.snackbarShow(GLOBAL_CONFIG.Snackbar.day_to_night)):(activateLightMode(),saveToLocal.set("theme","light",2),void 0!==GLOBAL_CONFIG.Snackbar&&btf.snackbarShow(GLOBAL_CONFIG.Snackbar.night_to_day)),"function"==typeof utterancesTheme&&utterancesTheme(),"object"==typeof FB&&window.loadFBComment(),window.DISQUS&&document.getElementById("disqus_thread").children.length&&setTimeout((()=>window.disqusReset()),200)}function copyUrl(e){$("body").after("<input id='copyVal'></input>");var n=e,t=document.getElementById("copyVal");t.value=n,t.select(),t.setSelectionRange(0,t.value.length),document.execCommand("copy"),$("#copyVal").remove()}function copyPageUrl(){copyUrl(window.location.href),btf.snackbarShow("复制本页链接地址成功"),removeRightMenu()}function rightmenuCopyText(e,n="no-add"){const t=GLOBAL_CONFIG.copyright;var o;o="add-copyright"==n&&e.length>t.limitCount?e+"\n\n\n"+t.languages.author+"\n"+t.languages.link+window.location.href+"\n"+t.languages.source+"\n"+t.languages.info:e,navigator.clipboard&&navigator.clipboard.writeText(o),removeRightMenu()}function imageToBlob(e){console.log(e);const n=new Image;image.crossOrigin="Anonymous";const t=document.createElement("canvas"),o=t.getContext("2d");return n.crossOrigin="",n.src=e,new Promise((e=>{n.onload=function(){t.width=this.naturalWidth,t.height=this.naturalHeight,o.drawImage(this,0,0),t.toBlob((n=>{e(n)}),"image/png",.75)}}))}async function copyImage(e){const n=await imageToBlob(e),t=new ClipboardItem({"image/png":n});navigator.clipboard.write([t])}function writeClipImg(e){removeRightMenu(),-1!=e.indexOf(location.host)?(btf.snackbarShow("正在下载中，请稍后",!1,1e4),0==rm.downloadimging&&(rm.downloadimging=!0,setTimeout((function(){copyImage(e),btf.snackbarShow("复制成功！图片已添加盲水印，请遵守版权协议"),rm.downloadimging=!1}),"10000"))):btf.snackbarShow("图片不同源，由于CORS限制，将无法提取位图！")}function downloadImage(e,n){removeRightMenu(),setTimeout((function(){let t=document.createElement("a"),o=new MouseEvent("click");t.download=n||"photo",t.href=e,t.click(),t.dispatchEvent(o),rm.downloadimging=!1}),2e3)}function searchBaidu(){btf.snackbarShow("即将跳转到百度搜索"),setTimeout((function(){window.open("https://www.baidu.com/s?wd="+selectTextNow)}),"2000"),removeRightMenu()}function switchReadMode(e){const n=document.body;let t;function o(){n.classList.remove("read-mode"),t.remove(),t.removeEventListener("click",o)}0==e?(n.classList.add("read-mode"),t=document.createElement("button"),t.type="button",t.className="fas fa-sign-out-alt exit-readmode",n.appendChild(t),t.addEventListener("click",o)):o(),removeRightMenu()}document.onmouseup=document.ondbclick=selceText,window.oncontextmenu=function(e){if(document.body.clientWidth>768){let n=e.clientX+10,t=e.clientY,o=$(".rightMenuNormal"),i=$(".rightMenuOther"),c=$(".rightMenuPlugin"),r=$("#menu-copytext"),d=$("#menu-commenttext"),a=$("#menu-newwindow"),m=$("#menu-copylink"),u=$("#menu-copyimg"),h=$("#menu-downloadimg"),l=$("#menu-search"),s=$("#menu-searchBaidu"),g=$("#menu-readmode"),w=e.target.href,f=e.target.currentSrc,y=location.href.includes("posts"),k=!1;return o.show(),i.show(),selectTextNow&&window.getSelection()?(k=!0,r.show(),d.show(),l.show(),s.show(),i.hide()):(r.hide(),d.hide(),s.hide(),l.hide()),w||f?(k=!0,a.show(),m.show(),i.hide(),w&&(domhref=w),f?(domImgSrc=f,domhref=f,u.show(),h.show()):(u.hide(),h.hide())):(u.hide(),h.hide(),a.hide(),m.hide()),y?g.show():g.hide(),k?c.show():c.hide(),rm.reloadrmSize(),n+rmWidth>window.innerWidth&&(n-=rmWidth),t+rmHeight>window.innerHeight&&(t-=rmHeight),rm.showRightMenu(!0,t,n),$("#rightmenu-mask").attr("style","display: flex"),!1}},$("#menu-backward").on("click",(function(){window.history.back()})),$("#menu-forward").on("click",(function(){window.history.forward()})),$("#menu-refresh").on("click",(function(){window.location.reload()})),$("#menu-darkmode").on("click",(function(){switchNightMode()})),$("#menu-home").on("click",(function(){window.location.href=window.location.origin})),$(".menu-link").on("click",(function(){removeRightMenu()})),rm.downloadimging=!1,$("#menu-copy").on("click",(function(){copyPageUrl()})),$("#menu-newwindow").on("click",(function(){window.open(domhref),removeRightMenu()})),$("#menu-copylink").on("click",(function(){rightmenuCopyText(domhref),btf.snackbarShow("已复制链接地址")})),$("#menu-copyimg").on("click",(function(){writeClipImg(domImgSrc)})),$("#menu-downloadimg").on("click",(function(){downloadImage(domImgSrc,"tzy1997")})),$("#menu-copytext").on("click",(function(){rightmenuCopyText(selectTextNow,"add-copyright"),btf.snackbarShow("复制成功"),removeRightMenu()})),$("#menu-searchBaidu").on("click",(function(){searchBaidu()})),$("#menu-print").on("click",(function(){removeRightMenu(),window.print()})),$("#menu-readmode").on("click",(function(){switchReadMode(document.body.classList.length)})),$("#rightmenu-mask").on("click",(function(){removeRightMenu()})),$("#rightmenu-mask").contextmenu((function(){return removeRightMenu(),!1}));